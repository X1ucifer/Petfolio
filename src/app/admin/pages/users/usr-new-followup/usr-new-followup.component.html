<!-- <div class="row">
    <div class="col-12" style="text-align: end;">
        <div>
            <p>AGENT NAME: <span> value </span> &nbsp; &nbsp; ALLOCATION DATE: <span> value </span> </p> 
        </div>
    </div>
</div> -->
<mat-icon style="text-align: right;width: 100%;margin-bottom: 13px;margin-top: -10px;" mat-button (click)="close()"> 
    X 
</mat-icon>

<div class="accordion" id="accordionExample">
    <div class="card">
      <div class="card-header" id="headingOne">
        <h2 class="mb-0">
          <button class="btn btn-link" type="button" data-toggle="collapse" data-target="#collapseOne" aria-expanded="true" aria-controls="collapseOne">
            FollowUps
          </button>
        </h2>
      </div>
  
      <div id="collapseOne" class="collapse show" aria-labelledby="headingOne" data-parent="#accordionExample">
        <div class="card-body">
            <div class="container-fluid">
                <div class="row">
                    <div class="col-12">
                        <form [formGroup]="FollowUpForm">
                            <div class="form-row">
                                <div class="form-group col-md-4">
                                    <label for="">FollowUp ID</label>
                                    <input type="text" placeholder="FollowUp ID" class="form-control" formControlName="_id" disabled>
                                </div>
                                <div class="form-group col-md-4">
                                    <label for="">Log Date</label>
                                    <input type="text" placeholder="Log Date" class="form-control" formControlName="log_date" disabled>
                                </div>
                                <div class="form-group col-md-4">
                                    <label for="">Log Type</label>
                                    <select class="form-control" formControlName="log_type">
                                        <option value=""> Choose</option>
                                        <option *ngFor="let item of LogTypeList" [value]="item.logtype">{{item.logtype}}</option>
                                    </select>
                                </div>
                                <!-- <div class="form-group col-md-4">
                                    <label for="">No of Mapped Account</label>
                                    <input type="text" placeholder="No of Mapped Account" class="form-control" formControlName="no_mapped_account">
                                </div> -->
                                <!-- <div class="form-group col-md-4">
                                    <label for="">Request Type</label>
                                    <input type="text" placeholder="Request" class="form-control" formControlName="request_type">
                                </div> -->

                                <br>
                                <!-- <div class="form-group col-md-4">
                                    <label for="">Field Visit Territory</label>
                                    <select class="form-control" formControlName="territory" (change)="onterritory($event)">
                                        <option value="">Choose</option>
                                        <option *ngFor="let item of areaCodeList" [value]="item.areacode">{{item.areacode}}</option>
                                    </select>
                                </div>
                                <div class="form-group col-md-4">
                                    <label for="">Field Visit Area</label>
                                    <select class="form-control" formControlName="fvarea">
                                        <option value="">Choose</option>
                                        <option *ngFor="let item of fieldvisitCodeList" [value]="item.fvcode">{{item.fvcode}}</option>
                                    </select>
                                </div> -->
                                
                                <div class="form-group col-md-4" >
                                    <label for="">Main Status</label>
                                    <select class="form-control" formControlName="mstatus" (change)="onMstatus($event)">
                                        <option value="">Choose</option>
                                        <option *ngFor="let item of mStatusList " [value]="item.mstatus_name">{{item.mstatus_name}}</option>
                                    </select>
                                </div>
                                <div class="form-group col-md-4" >
                                    <label for="">Sub Status</label>
                                    <select class="form-control" formControlName="substatus">
                                        <option value="">Choose</option>
                                        <option *ngFor="let item of sStatusList" [value]="item.sstatus_name">{{item.sstatus_name}}</option>
                                    </select>
                                </div>
                                <div class="form-group col-md-4" *ngIf="showPTP">
                                    <label for="">PTP Amount</label>
                                    <input type="text" placeholder="PTP amount" class="form-control" formControlName="ptp_amount">
                                </div>
                                <div class="form-group col-md-4" *ngIf="showPTP">
                                    <label for="">PTP Date</label>
                                    <input type="date" placeholder="PTP Date" class="form-control" formControlName="ptp_status">
                                </div>
                                <div class="form-group col-md-4">
                                    <label for="">FollowUp Date</label>
                                    <input type="date" placeholder="Follow Up Date" class="form-control" formControlName="fdate">
                                </div>
                                <div class="form-group col-md-4">
                                    <label for="">Bank CODE</label>
                                    <select class="form-control" formControlName="bcode">
                                        <option value="">Choose</option>
                                        <option *ngFor="let item of bankCodeList" [value]="item.bcode">{{item.bcode}}</option>
                                    </select>
                                </div>
                                <div class="form-group col-md-4">
                                    <label for="">Action Taken</label>
                                    <select class="form-control" formControlName="actiontaken">
                                        <option value="">Choose</option>
                                        <option *ngFor="let item of actionstakenList" [value]="item.actiontaken_name">{{item.actiontaken_name}}</option>
                                    </select>
                                </div>
                                <div class="form-group col-md-4">
                                    <label for="">Next Action</label>
                                    <select class="form-control" formControlName="actiontotake">
                                        <option value="">Choose</option>
                                        <option *ngFor="let item of actionstakenList" [value]="item.actiontaken_name">{{item.actiontaken_name}}</option>
                                    </select>
                                </div>
                                <div class="form-group col-md-4">
                                    <label for="">Tracing Tools</label>
                                    <select class="form-control" formControlName="tracingtool">
                                        <option value="">Choose</option>
                                        <option *ngFor="let item of TracingToolsList" [value]="item.tracking_name">{{item.tracking_name}}</option>
                                    </select>
                                </div>
                                <div class="form-group col-md-4">
                                    <label for="">Tracing Link</label>
                                    <input type="text" placeholder="tracing link" class="form-control" formControlName="tracinglink">
                                </div>
                                <div class="form-group col-md-12">
                                    <label for="">Remarks</label>
                                    <textarea name="" id="" cols="30" rows="5" placeholder="Remarks" class="form-control" formControlName="remarks"></textarea>
                                </div>
                                <div class="form-group col-md-12">
                                    <input type="file" class="custom-file-input" id="customFile" (change)="getFile($event)">
                                    <label class="custom-file-label" for="customFile">Choose file</label>
                                </div>
                                <p *ngIf="uploaded">File Uploaded</p>
                            </div>
                            <div class="d-flex justify-content-end">
                                <button class="btn btn-sm btn-success" (click)="addNewFollowUp()">ADD</button>
                            </div>
                        </form>        
                    </div>
                </div>
            </div>   
            
            
            <div class="container-fluid">
                <hr>
                <div class="row" style="text-align: end; margin:10px;">
                    <p style="font-size: 14px;"><b>FollowUp List</b></p>
                </div>
                <div class="row">
                    <div class="col-12">
                        <ag-grid-angular #agGrid 
                                style="width: auto; height: 300px;"
                                class="ag-theme-alpine"
                                [rowData]="FollowUpList"
                                [rowSelection]="'multiple'"
                                [columnDefs]="FollowUpcolumnDefs"
                                [pagination]="true">
                        </ag-grid-angular>
                    </div>
                </div>
            </div>
        </div>
      </div>
    </div>
    <div class="card">
      <div class="card-header" id="headingTwo">
        <h2 class="mb-0">
          <button class="btn btn-link collapsed" type="button" data-toggle="collapse" data-target="#collapseTwo" aria-expanded="false" aria-controls="collapseTwo">
            Payments
          </button>
        </h2>
      </div>
      <div id="collapseTwo" class="collapse" aria-labelledby="headingTwo" data-parent="#accordionExample">
        <div class="card-body">
            <app-user-new-payment></app-user-new-payment>
        </div>
      </div>
    </div>
    <div class="card">
      <div class="card-header" id="headingThree">
        <h2 class="mb-0">
          <button class="btn btn-link collapsed" type="button" data-toggle="collapse" data-target="#collapseThree" aria-expanded="false" aria-controls="collapseThree">
            Settlements
          </button>
        </h2>
      </div>
      <div id="collapseThree" class="collapse" aria-labelledby="headingThree" data-parent="#accordionExample">
        <div class="card-body">
            <app-user-new-settlement></app-user-new-settlement>
        </div>
      </div>
    </div>
    <div class="card">
        <div class="card-header" id="headingFour">
          <h2 class="mb-0">
            <button class="btn btn-link collapsed" type="button" data-toggle="collapse" data-target="#collapseFour" aria-expanded="false" aria-controls="collapseFour">
              Field Visit
            </button>
          </h2>
        </div>
        <div id="collapseFour" class="collapse" aria-labelledby="headingFour" data-parent="#accordionExample">
          <div class="card-body">
            <app-new-field-visit></app-new-field-visit>
          </div>
        </div>
      </div>
  </div>



